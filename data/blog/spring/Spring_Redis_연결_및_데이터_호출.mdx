---
title: Springì—ì„œ Redis ì—°ê²° ì„¸íŒ… ë°©ë²• ë° ë°ì´í„° í˜¸ì¶œ ë°©ë²•(RedisTemplate)
date: '2025-09-23'
tags: ['spring']
draft: false
summary: Springì—ì„œ Redisë¥¼ ì—°ê²°í•˜ê³  RedisConfigíŒŒì¼ì„ ì„¤ì •í•˜ëŠ” ë°©ë²• ì •ë¦¬. í™˜ê²½ ë³€ìˆ˜ ì„¸íŒ… ë° ë°ì´í„°ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…. 
---


{/* ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ **ë¡œê·¸ì¸ ìƒíƒœ ê´€ë¦¬**ë¥¼ êµ¬í˜„í•  ë•Œ ê°€ì¥ ì „í†µì ì´ë©´ì„œë„ ì•ˆì •ì ì¸ ë°©ë²•ì€ **ì„¸ì…˜(Session) ê¸°ë°˜ ì¸ì¦**ì´ë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” **Spring Security**ë¥¼ í™œìš©í•´ ì„¸ì…˜ ë°©ì‹ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒì„ êµ¬í˜„í•˜ê³ ,
ê¶Œí•œì´ í•„ìš”í•œ APIì— ì ‘ê·¼í–ˆì„ ë•Œ ì–´ë–»ê²Œ ì¸ì¦/ì¸ê°€ë¥¼ ì²˜ë¦¬í•˜ëŠ”ì§€ ì •ë¦¬í–ˆë‹¤.

ì•„ë˜ëŠ” ì„¸ì…˜ë°©ì‹ì˜ ë¡œê·¸ì¸ì˜ ì›Œí¬ í”Œë¡œìš°ë¥¼ ë³´ì—¬ì¤€ë‹¤. */}


Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ **Redisë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•**ì€
`spring-boot-starter-data-redis` ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ê³ , RedisTemplateì„ ì§ì ‘ `Bean`ìœ¼ë¡œ ë“±ë¡í•´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” ë””íœë˜ì‹œ ì¶”ê°€ â†’ ì„¤ì • íŒŒì¼ ì‘ì„± â†’ Config í´ë˜ìŠ¤ êµ¬í˜„ â†’ ì‚¬ìš© ì˜ˆì‹œ â†’ ìš´ì˜ íŒê¹Œì§€ ì •ë¦¬í•œë‹¤.


---
### 1. ë””íœë˜ì‹œ ì¶”ê°€

Gradle ê¸°ì¤€ìœ¼ë¡œ `spring-boot-starter-data-redis`ë§Œ ì¶”ê°€í•˜ë©´ `Lettuce` í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ Redisì— ì—°ê²°í•  ìˆ˜ ìˆë‹¤.

```Gradle
dependencies {
  implementation "org.springframework.boot:spring-boot-starter-data-redis" // Lettuce ê¸°ë³¸
  implementation "org.springframework.boot:spring-boot-starter-cache" // (ì„ íƒ) ìºì‹œ ì¶”ìƒí™” ì‚¬ìš©
  implementation "org.springframework.session:spring-session-data-redis" // (ì„ íƒ) ì„¸ì…˜ ì €ì¥ì†Œë¡œ Redis í™œìš©
}
```

---
### 2. application.yml

Redis ì ‘ì† ì •ë³´ë¥¼ ì™¸ë¶€ ì„¤ì •ìœ¼ë¡œ ë¶„ë¦¬í•œë‹¤.

```yml
redis-monitor:
  data:
    host: 127.0.0.1
    port: 6379
    database: 0
    # password: mypassword  # ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš© ì‹œ ì¶”ê°€
    timeout-seconds: 3
```

ìš´ì˜ í™˜ê²½ì—ì„œëŠ” `host`, `port`, `password`ë¥¼ í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.


---
### 3. RedisConfig í´ë˜ìŠ¤ ì‘ì„±
RedisConnectionFactoryì™€ RedisTemplateì„ ì§ì ‘ Beanìœ¼ë¡œ ë“±ë¡í•œë‹¤.<br/>
ì—¬ê¸°ì„œëŠ” ë¬¸ìì—´ ì „ìš© í…œí”Œë¦¿ê³¼ JSON ì§ë ¬í™” í…œí”Œë¦¿ì„ ê°ê° ë§Œë“ ë‹¤.

1. **íŒŒì¼íŠ¸ë¦¬ êµ¬ì„±**
    - app / config / RedisConfig.java íŒŒì¼ ìƒì„± 
    
```bash
app/
 â””â”€ src/main/java/
    â””â”€ org/name/app/
       â”œâ”€ NameApplication.java
       â””â”€ config/
          â””â”€ RedisConfig.java
```


2. **RedisConfig.java íŒŒì¼ ì‘ì„±**

```java

@Configuration
public class RedisConfig {

    @Value("${redis-monitor.data.host}")
    private String host;

    @Value("${redis-monitor.data.port}")
    private int port;

    @Value("${redis-monitor.data.password:}")
    private String password;

    @Value("${redis-monitor.data.database}")
    private int database;

    @Bean
    public RedisConnectionFactory monitorRedisConnectionFactory() {
        RedisStandaloneConfiguration config = new RedisStandaloneConfiguration(host, port);
        config.setDatabase(database);
        if (password != null && !password.isEmpty()) {
            config.setPassword(password);
        }
        return new LettuceConnectionFactory(config);
    }


    @Bean(name = "NameRedisTemplate")
    public RedisTemplate<String, String> monitorRedisTemplate() {
        RedisTemplate<String, String> template = new RedisTemplate<>();
        template.setConnectionFactory(monitorRedisConnectionFactory());
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(new StringRedisSerializer());
        template.setDefaultSerializer(RedisSerializer.string());
        return template;
    }
}
```
    

---
### 4. ì‚¬ìš© ì˜ˆì‹œ

ë“±ë¡í•œ RedisTemplateì„ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```java
package org.ppsol.ppsol_monitoring_importer.scheduler;

import java.util.Set;
import lombok.RequiredArgsConstructor;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.boot.CommandLineRunner;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.stereotype.Component;

@Component
public class StationDataImportScheduler implements CommandLineRunner {

    private final RedisTemplate<String, String> redis;

    public StationDataImportScheduler(
        @Qualifier("NameRedisTemplate") RedisTemplate<String, String> redis
    ) {
        this.redis = redis;
    }

    @Override
    public void run(String... args) {
        Set<String> keys = redis.keys("*"); //ë ˆë””ìŠ¤ì˜ ëª¨ë“  í‚¤ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ
        for (String key : keys) {
            System.out.println(key);
        }
        String value = redis.opsForValue().get("[keyName]"); //ë ˆë””ìŠ¤ì—ì„œ [keyName]ì— í•´ë‹¹ë˜ëŠ” í–‰ì˜ valueë¥¼ ê°€ì €ì˜¤ëŠ” ë©”ì„œë“œ
        System.out.println(value);
    }
}
```

**REDIS ë‚´ì¥í•¨ìˆ˜ ì¢…ë¥˜**
    - opsForValue() : ë¬¸ìì—´ ë‹¨ì¼ ê°’ (key-value)
	- opsForHash() : í•´ì‹œ(Hash)
	- opsForList() : ë¦¬ìŠ¤íŠ¸(List)
	- opsForSet() : ì§‘í•©(Set)
	- opsForZSet() : ì •ë ¬ëœ ì§‘í•©(Sorted Set)

---

## **ğŸ“ ì •ë¦¬ & ë°°ìš´ ì **

- spring-boot-starter-data-redisë¡œ Lettuce í´ë¼ì´ì–¸íŠ¸ ìë™ í¬í•¨
- RedisConnectionFactoryì™€ RedisTemplateì„ ì§ì ‘ Beanìœ¼ë¡œ ë“±ë¡
- ë¬¸ìì—´/JSON ì§ë ¬í™” ë°©ì‹ì„ ë¶„ë¦¬í•´ì„œ í™œìš©
- @Qualifierë¡œ ì›í•˜ëŠ” RedisTemplateì„ ì£¼ì…ë°›ì•„ ì‚¬ìš©
