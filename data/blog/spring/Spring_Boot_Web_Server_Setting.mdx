---
title: Spring Boot Web Api Server Setting
date: '2025-09-17'
tags: ['spring']
draft: false
summary: 오늘은 Spring Boot에서 Lombok, PostgreSQL을 이용해 웹 API 서버를 만들기 실습.
---

오늘은 Spring Boot를 이용해 아주 간단한 Web API 서버를 만들고,  
PostgreSQL 데이터베이스를 연결하고,  
Lombok을 활용해서 코드를 줄이는 실습을 해보았다.

이 글에서는 의존성 설치부터 디렉토리 구조, yml 작성, 코드 구성까지

## 처음부터 끝까지 하나씩 정리한다.

### 프로젝트 목표

```text
-	Spring Boot로 간단한 웹 API 서버 만들기
-	PostgreSQL에 연결해서 데이터 조회하기
-	Lombok으로 깔끔한 Entity, Controller 작성하기
-	findAll() 메소드로 전체 데이터 리스트 표출하기
```

---

### 1. 프로젝트 세팅

```text
-	Gradle 프로젝트
-	Java 17
-	Spring Boot 3.2.x
-	Dependencies:
	-	Spring Web
	-	Spring Data JPA
	-	PostgreSQL Driver
	-	Lombok
```

---

### 2. 디렉토리 구조

IntelliJ로 보면 디렉토리는 이렇게 구성했다.

```bash
project/
 ├─ build.gradle
 ├─ src/
 │   └─ main/
 │       ├─ java/
 │       │   └─ org/
 │       │       └─ example/
 │       │           └─ practicedemo1/
 │       │               ├─ controller/
 │       │               │   └─ ItemController.java
 │       │               ├─ domain/
 │       │               │   └─ Item.java
 │       │               ├─ Repository/
 │       │               │   └─ ItemRepository.java
 │       │               └─ Practicedemo1Application.java
 │       └─ resources/
 │           └─ application.yml
 ├─ build.gradle
 └─ settings.gradle
```

```text
-	controller : API를 담당
-	domain : 데이터베이스 테이블(Entity)
-	Repository : JPA 인터페이스
```

---

### 3. 의존성 설정

**build.gradle**

```java
plugins {
    id 'org.springframework.boot' version '3.2.5'
    id 'io.spring.dependency-management' version '1.1.3'
    id 'java'
}

group = 'org.example'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '17'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    runtimeOnly 'org.postgresql:postgresql'
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}
```

✅ 주의:  
- compileOnly와 annotationProcessor 둘 다 넣어야 Lombok이 정상 작동한다.

---

### 4. DB 설정

**application.yml**

```yml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/your_database_name
    username: your_db_username
    password: your_db_password
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true

server:
  port: 8080
```

✅ 주의:  
- your_database_name, your_db_username, your_db_password는 본인 DB 설정에 맞게 변경해야 한다.

---

### 5. 코드 작성

**Entity: Item.java**4️⃣

```java
package org.example.practicedemo1.domain;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.ToString;

@Entity
@Getter
@NoArgsConstructor
@ToString
public class Item {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private Integer price;

    private String title;
}
```

✅ 설명:  
- @Entity : 이 클래스가 테이블과 매핑된다는 의미  
- @Getter, @ToString, @NoArgsConstructor : Lombok 사용해서 코드 간결화

**Repository: ItemRepository.java**4️⃣

```java
package org.example.practicedemo1.Repository;

import org.example.practicedemo1.domain.Item;
import org.springframework.data.jpa.repository.JpaRepository;

public interface ItemRepository extends JpaRepository<Item, Long> {
}
```

✅ 설명:  
- JpaRepository를 상속하면 findAll(), save(), findById() 등 기본 메서드가 자동 제공된다.

**Controller: ItemController.java**4️⃣

```java
package org.example.practicedemo1.controller;

import java.util.List;
import lombok.RequiredArgsConstructor;
import org.example.practicedemo1.Repository.ItemRepository;
import org.example.practicedemo1.domain.Item;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/api")
@RequiredArgsConstructor
public class ItemController {

    private final ItemRepository itemRepository;

    @GetMapping("/items")
    public List<Item> getItems() {
        List<Item> a = itemRepository.findAll();
        return a;
    }
}
```

✅ 설명:  
- @RestController : @Controller + @ResponseBody 조합 (JSON 바로 리턴)  
- @RequiredArgsConstructor : final 필드에 대해 생성자 자동 생성

---

### 6. 실행 결과

서버를 실행하고 브라우저에서:

```null
http://localhost:8080/api/items
```

요청을 보내면,  
PostgreSQL에 저장된 Item 리스트가 JSON 형태로 응답된다.

예시:

```json
[
  {
    "id": 1,
    "price": 100,
    "title": "사과"
  },
  {
    "id": 2,
    "price": 200,
    "title": "바나나"
  }
]
```

## Hibernate 로그에도 SQL 쿼리가 출력되어 확인할 수 있다.

### ✅ 마무리 정리

이번 실습에서는  
- Spring Boot로 웹 서버를 만들고  
- PostgreSQL과 연동하고  
- Lombok으로 코드 양을 줄여  
- 깔끔한 API를 만들어냈다.

이 구조를 바탕으로 CRUD(Create, Read, Update, Delete) API를 추가하거나, 더 복잡한 비즈니스 로직을 쌓아갈 수 있다.
