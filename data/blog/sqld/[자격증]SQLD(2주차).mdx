---
title: '[SQLD 자격증 공부] Chaper2 - 정규화 (WEEK 2)'
date: '2025-09-14'
tags: ['sqld', 'database', 'license']
draft: false
summary: SQLD 2주차 공부 내용을 정리.
---

import ImageWithCaption from '@/components/mdxComponents/ImageWithCaption'

### 1. 정규화

> **정규화란 중복데이터를 줄이고, 이상현상(Anomaly)를 방지하기 위한 테이블의 분해과정이다.**

- 중복을 줄이고 구조를 클리어하게 정리하여, CRUD시 문제가 없도록 하는 것
- 일반적으로 입력, 수정, 삭제의 성능은 올라가고, 읽기의 성능은 떨어질 수 있음 > 읽기의 성능은 반정규화를 통해 어느정도 극복할 수 있음
- 제 1정규화 > 제 2정규화 > 제 3정규화 > BCNF의 과정을 거친다.

  ```mermaid
        flowchart LR
            A[비정규 릴레이션] -->|도메인 원자값| B[1NF]
            B[1NF] -->|부분적 함수 종속 제거| C[2NF]
            D[2NF] -->|이행석 함수 종속 제거| E[3NF]
            E[3NF] -->|결정자 및 후보키 제거| F[BCNF]
            <<정규화 과정>>
  ```

1. **제 1정규화(1NF)**
   - 속성(도메인)의 원자성(Atomicty)을 확보하는 과정
   - 모든 속성이 하나의 속성값을 갖고 유사속성이 반복되지 않는 상태 > 원자성(Atomicty)을 확보한다.

   | **고객번호** | **고객명** | **전화번호1** | **전화번호2** |
   | :----------: | :--------: | :-----------: | :-----------: |
   |     001      |     JO     | 11-1111-1111  | 22-2222-2222  |
   |              |            |               |               |

   | **(제 1정규화)** |
   | :--------------: |
   |      **▿**       |

   | **고객번호** | **고객명** | **전화번호** |
   | :----------: | :--------: | :----------: |
   |     001      |     JO     | 11-1111-1111 |
   |     001      |     JO     | 22-2222-2222 |
   |              |            |              |

  <br />

2. **제 2정규화(2NF)**
   - 함수 종속성을 제거하는 과정
   - 주식별자가 2개 이상으로 구성된 복합식별자일 경우 일반속성이 주식별자의 종속성을 갖는 경우가 생기는데, 이를 함수종속성이라고 하고 2정규화는 함수 종속성을 제거하는 과정을 의미.

   | 학생번호 | 학생이름 | 과목 | 성적 |
   | -------- | -------- | ---- | ---- |
   | 1001     | 김민준   | 수학 | A    |
   | 1001     | 김민준   | 영어 | B    |
   | 1002     | 이서윤   | 수학 | A    |

   ```mermaid
     erDiagram
         학생성적{
             int 학생번호 PK
             string 학생이름
             string 과목
             string 성적
         }
         <<제 2정규화 실행 전의 자료형>>
   ```

   - 주식별자(기본키)는 학생번호 + 과목으로 구성된다. 학생번호 + 과목이 합쳐져야 한 레코드(학생의 특정 과목 성적)를 유일하게 식별할 수 있다.
   - 문제점 :
     - 학생이름은 학생번호로만 식별이 되고, 성적은 학생번호 + 과목으로 식별된다.
     - 주식별자가 복합일때, 특정 항목이 주식별자의 일부에 의해 식별될때 부분적 함수 종속(Partical Functional Dependency) 상태라고 한다.
   - 해결 :
     - 학생 테이블: 학생번호(PK), 학생이름
     - 성적 테이블: 학생번호(FK), 과목, 성적

   | **(제 2정규화)** |
   | :--------------: |
   |      **▿**       |

   | 학생번호(PK) | 학생이름 |
   | ------------ | -------- |
   | 1001         | 김민준   |
   | 1002         | 이서윤   |

   | 학생번호(FK) | 과목 | 성적 |
   | ------------ | ---- | ---- |
   | 1001         | MATH | A    |
   | 1001         | ENG  | B    |
   | 1002         | MATH | C    |
   | 1002         | ENG  | A    |

   ```mermaid
     erDiagram
       학생 one to many 성적 : "1:N"
         학생{
             int 학생번호 PK
             string 학생이름
         }
         성적{
             int 학생번호 FK
             string 과목
             string 성적
         }
         <<제 2정규화 실행 후의 자료형>>
   ```

   - 결과 :
     - 모든 일반속성은 기본키에 종속됨. (이름은 학생번호에 종속, 성적은 학생번호+과목(복합키)에 종속)
     - 부분 종속성 제거 → 2정규화 달성.

3. **제 3정규화(3NF)**
   - 이행 함수를 제거하는 과정이다.
   - A 속성이 B속성에 종속되고, B속성이 C속성에 종속될때, A>B>C관계가 형성되며 이를 이행적으로 종속되어있다고 한다.

   | 사원번호 | 사원이름 | 부서코드 | 부서명 |
   | -------- | -------- | -------- | ------ |
   | 001      | JO       | D01      | HQ     |
   | 002      | MIN      | D02      | DEV    |
   | 003      | GOO      | D03      | SOL    |
   - 이경우에 사원번호/사원이름(A) > 부서코드(B) > 부서명(C)의 관계를 가진다.

   | **(제 3정규화)** |
   | :--------------: |
   |      **▿**       |

   | 사원번호 | 사원이름 | 부서코드 |
   | -------- | -------- | -------- |
   | 001      | JO       | D01      |
   | 002      | MIN      | D02      |
   | 003      | GOO      | D03      |

   | 부서코드 | 부서명 |
   | -------- | ------ |
   | 001      | HQ     |
   | 002      | DEV    |
   | 003      | SOL    |
   - 테이블을 분리하여 A>B / B>C의 관계로 이행 함수 종속성을 제거한다.

### 2. 관계와 조인의 이해

1.  **조인**

    > 두개의 테이블을 공통의 식별자를 통해 테이블로 조회할수 있도록 합치는 것
    - 조인은 특정 테이블을 쉽게 조회할 수 있게하지만, 조인이 늘고, 정규화가 진행될 수록 성능은 떨어진다.
    - 반정규화를 통해 성능을 향상 시킬 수 있다.

2.  **반정규화**
    1. 테이블 병합
       - 조인 관계가 성능을 떨어트릴때 테이블을 병합한다.
    2. 테이블 분할
       - 테이블의 특정속성만 접근하는 경우 별도의 테이블로 나눈다.
       - 분할의 종류 :
         - 수직분할 : 테이블의 특정 속성만 빼서 별도의 테이블을 만들고, 1:1관계를 만든다.
         - 수평분할 : 특정 속성의 범위에 맞는 값들로 테이블을 만드는 경우

           ```mermaid
                   classDiagram
             납부이력 --|> 1월납부
             납부이력 --|> 2월납부
             납부이력 --|> N월납부 : ...
             납부이력 : 납부일자
             납부이력 : 납부번호
             class 1월납부{
                 납부일자
                 납부번호
             }
             class 2월납부{
                 납부일자
                 납부번호
             }
             class N월납부{
                 납부일자
                 납부번호
             }
             <<수평 분할>>
           ```

    3. 테이블 추가
       - 조회에 필요한 속성을 포함하는 새로운 테이블 추가
         - 중복테이블 추가 : 다른 업무에 있는 테이블을 복제하여 원격 조인 제거
         - 통계테이블 추가 : SUM,AVG 값을 별도의 속성으로 추가
         - 이력테이브 추가 : 변경 이력 추가
         - 부분테이블 추가 : I/O를 줄이기 위한 특정 속성을 모아 테이블 생성

3.  **칼럼 반정규화**
    1. 중복 칼럼 추가
       - 조인을 최소화하기 위해 칼럼의 중복을 허락
    2. 파생 칼럼 추가
       - 트랜잭션 처리시 부하를 줄이기 위해 계산값을 칼럼에 추가하는것
    3. 이력 테이블 칼럼 추가
       - 데이터조회의 조건을 칼럼으로 쿠가해 조회 성능을 향상
    4. PK에 의한 칼럼 추가
       - PK값이 특정의미를 가질때 이것의 값의 의미를 추가 (ex> 접수날짜+ 접수순번이 접수 PK일때, 접수날짜나 순번을 칼럼으로 추가)
    5. 응용 시스템 오동작을 위한 칼럼
       - 시스템의 결과 중 오류값이 발생될 가능성이 있을때 기존 데이터를 보관하기 위한 칼럼

4.  **관계 반정규화**
    1. 성능저하를 막기 위해 관계를 추가하는 방법
       - A - (1:1) - B - (1:1) - C - (1:1) - D - (1:1) - E와 같은 관계가 있을때 A-E의 관계를 만들어 조회 조건을 줄일 수 있다.

### 3. 모델이 표현하는 트랜잭션의 이해

1.  **트랜젝션**
    - 데이터베이스의 논리적 작업단위
    - INSERT, UPDATE, DELETE와 같은 여러작업을 할때 한번에 처리하는 단위로 묶어서 취급
    1. 트랜잭션의 특징
       - 원자성 : 하나의 트랜잭션은 모두 실행하거나 모두 실행하지 않거나 둘중 하나만의 결과만 낸다.
       - 일관성 : 트랜잭션이후와 이전 모두 정합성을 갖고 이전에 오류가 없다면 이후에도 오류가 없다.
       - 고립성 : 트랜잭션관의 영향은 없다.
       - 영속성 : 트랜잭션 결과값이 영구적으로 DB에 저장된다.

    2. 트랜잭션의 격리수준이 낮을때 특성
    - Dirty Read : 트랜잭션에 의해 수정된 후 커밋 되기전에 다른 트랜잭션에서 읽어가면서 생기는 오류
    - Not Repeatable Read : 같은 트랜잭션을 반복할때 값이 바뀌어 결과가 달라짐
    - Phantom Read : 같은 트랜잭션이 두번 반복될때 조회결과 값의 갯수가 변경되는 것

### 4. NULL 속성의 이해

1.  **NULL의 개념**
    - 값이 없다는 의미
    - 공백과 다르며 0과 같은 값이 아닌, NOTHING의 개념

### 5. 본질 / 인조 식별자

1.  **본질 식별자**
    - 업무에 존재하는 식별자 속성 > 주민번호와 같은 값

2.  **인조 식별자**
    - 업무에 존재하지 않는 식별자 인조적으로 만든 값임 > 회원번호
